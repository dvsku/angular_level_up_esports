<nav class="navbar fixed-top navbar-expand-lg bg-header">
    <button class="navbar-toggler" type="button" (click)="toggleMenu()">
        <fa-icon [icon]="faBars" class="navbar-toggler-icon"></fa-icon>
    </button>
    <a class="navbar-brand" routerLink="/esports"><img src="https://via.placeholder.com/40/FFFFFF/000000" /></a>
    <div [ngbCollapse]="isMenuCollapsed" class="collapse navbar-collapse px-5 mt-5 mt-lg-0">
        <div class="navbar-nav">
            <a class="nav-link" (click)="toggleShop()"
                >SHOP <fa-icon [icon]="faArrowDown" class="d-inline-block"></fa-icon
            ></a>
            <div [ngbCollapse]="isShopCollapsed" class="navbar-collapse-details">
                <div class="row py-0 px-3 py-lg-4 px-lg-5">
                    <div class="col-3">
                        <p class="title fw-800 fc-blue d-none d-lg-block">
                            MERCH <span class="fc-black">ORIGINALS</span>
                        </p>
                        <ul class="list-unstyled">
                            <li class="text-left">
                                <a class="standard-link" [routerLink]="['/esports/shop', { category: 'all' }]">ALL</a>
                            </li>
                            <li class="text-left" *ngFor="let category of categories">
                                <a
                                    class="standard-link"
                                    [routerLink]="['/esports/shop', { category: category.categoryName.toLowerCase() }]"
                                    >{{ category.categoryName.toUpperCase() }}</a
                                >
                            </li>
                        </ul>
                    </div>
                    <div class="col-9 wrapper-images d-none d-lg-block">
                        <div class="row pb-2 pt-4 pl-5">
                            <div class="wrapper-shop-items">
                                <app-swappable-image
                                    *ngFor="let product of featuredProducts"
                                    class="shop-item-image"
                                    firstSrc="{{ product.productInfoIcons[0].productIcon }}"
                                ></app-swappable-image>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <a class="nav-link" (click)="toggleTeams()"
                >TEAMS <fa-icon [icon]="faArrowDown" class="d-inline-block"></fa-icon
            ></a>
            <div [ngbCollapse]="isTeamsCollapsed" class="navbar-collapse-details">
                <div class="row py-0 px-3 py-lg-4 px-lg-5">
                    <div class="col-3 col-lg-4 col-xl-3">
                        <p class="title fw-800 fc-blue d-none d-lg-block">
                            TEAMS <span class="fc-black">AND ACHIEVEMENTS</span>
                        </p>
                        <ul class="list-unstyled">
                            <li class="text-left"><a class="standard-link">CONTENT CREATORS</a></li>
                            <li class="text-left"><a class="standard-link">DOTA 2</a></li>
                            <li class="text-left"><a class="standard-link">COUNTER-STRIKE: GLOBAL OFFENSIVE</a></li>
                            <li class="text-left"><a class="standard-link">LEAGUE OF LEGENDS</a></li>
                            <li class="text-left"><a class="standard-link">WARCRAFT III</a></li>
                            <li class="text-left"><a class="standard-link">FORTNITE</a></li>
                            <li class="text-left"><a class="standard-link">HEROES OF THE STORM</a></li>
                            <li class="text-left"><a class="standard-link">HEARTHSTONE</a></li>
                        </ul>
                    </div>
                    <div class="col-9 col-lg-8 col-xl-8 wrapper-images d-none d-lg-block">
                        <div class="row pb-2 pt-4 pl-5">
                            <div class="wrapper-games">
                                <app-swappable-image
                                    class="game-image"
                                    firstSrc="/assets/content-creators.jpg"
                                ></app-swappable-image>
                                <app-swappable-image
                                    class="game-image"
                                    firstSrc="/assets/game-dota2.jpg"
                                ></app-swappable-image>
                                <app-swappable-image
                                    class="game-image"
                                    firstSrc="/assets/game-csgo.jpg"
                                ></app-swappable-image>
                                <app-swappable-image
                                    class="game-image"
                                    firstSrc="/assets/game-lol.jpg"
                                ></app-swappable-image>
                            </div>
                        </div>
                        <div class="row pb-2 pt-4 pl-5">
                            <div class="wrapper-games">
                                <app-swappable-image
                                    class="game-image"
                                    firstSrc="/assets/game-wc3.jpg"
                                ></app-swappable-image>
                                <app-swappable-image
                                    class="game-image"
                                    firstSrc="/assets/game-fortnite.jpg"
                                ></app-swappable-image>
                                <app-swappable-image
                                    class="game-image"
                                    firstSrc="/assets/game-hots.jpg"
                                ></app-swappable-image>
                                <app-swappable-image
                                    class="game-image"
                                    firstSrc="/assets/game-hs.jpg"
                                ></app-swappable-image>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <a class="nav-link" routerLink="/bootcamp">BOOTCAMP</a>
            <a class="nav-link" routerLink="/gaming-area">GAMING AREA</a>
            <a class="nav-link" routerLink="/partners">PARTNERS</a>
        </div>
        <div class="navbar-nav ml-auto">
            <a class="nav-link" (click)="toggleCart()"
                ><fa-icon [icon]="faCart" class="d-inline-block"></fa-icon> CART
                <fa-icon [icon]="faArrowDown" class="d-inline-block"></fa-icon
            ></a>
            <div id="cartCollapse" [ngbCollapse]="isCartCollapsed" class="navbar-collapse-details">
                <ng-container *ngIf="cart.length > 0; else cartEmpty">
                    <div class="row py-0 px-3 pt-lg-4 pb-lg-1 px-lg-5">
                        <div class="col-12">
                            <table class="table">
                                <thead>
                                    <th class="text-center" scope="col">Photo</th>
                                    <th scope="col">Name</th>
                                    <th class="text-center" scope="col">Size</th>
                                    <th class="text-center" style="min-width: 115px" scope="col">Quantity</th>
                                    <th class="text-center" scope="col">Price</th>
                                    <th class="text-center" scope="col">Subtotal</th>
                                    <th class="text-center" scope="col">Action(s)</th>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let product of cart">
                                        <td class="align-middle text-center" style="width: 75px" scope="row">
                                            <a routerLink="/esports/shop/product/{{ product?.productId }}">
                                                <img
                                                    class="img-thumbnail product-thumbnail"
                                                    src="{{ product.productIcon }}"
                                                    alt="{{ product.productName }}"
                                                />
                                            </a>
                                        </td>
                                        <td class="align-middle product-name">
                                            <a
                                                class="standard-link"
                                                routerLink="/esports/shop/product/{{ product?.productId }}"
                                            >
                                                <span>{{ product.productName }}</span>
                                            </a>
                                        </td>
                                        <td class="align-middle text-center">
                                            {{ product.productSize }}
                                        </td>
                                        <td class="align-middle text-center">
                                            <button
                                                type="button"
                                                class="standard-btn standard-btn-primary quantity-buttons"
                                                (click)="decreaseCount(product)"
                                            >
                                                -
                                            </button>
                                            <!-- <div [ngClass]="{'btn-quantity ': validateDecreaseButton(productInOrder), 'btn-quantity-disabled ': !validateDecreaseButton(productInOrder)}" 
											class="btn-standard" (click)="decreaseCount(productInOrder)">-</div> -->
                                            <span class="mx-2">{{ product.count }}</span>
                                            <button
                                                type="button"
                                                class="standard-btn standard-btn-primary quantity-buttons"
                                                (click)="increaseCount(product)"
                                            >
                                                +
                                            </button>
                                            <!-- <div [ngClass]="{'btn-quantity ': validateIncreaseButton(productInOrder), 'btn-quantity-disabled ': !validateIncreaseButton(productInOrder)}" 
											class="btn-standard" (click)="increaseCount(productInOrder)">+</div> -->
                                        </td>
                                        <td class="align-middle text-center">{{ product.productPrice }} RSD</td>
                                        <td class="align-middle text-center">
                                            {{ product.productPrice * product.count }} RSD
                                        </td>
                                        <td class="align-middle text-center">
                                            <a
                                                class="standard-btn standard-btn-primary"
                                                (click)="removeFromCart(product)"
                                                >Remove</a
                                            >
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="row px-3 px-lg-5 pb-lg-3">
                        <div class="col-12 d-flex flex-row-reverse pb-2">
                            <a class="standard-btn standard-btn-primary">checkout</a>
                        </div>
                    </div>
                </ng-container>
                <ng-template #cartEmpty>
                    <div class="row py-0 px-3 py-4">
                        <div class="col-12 text-center">
                            <h3>cart is currently empty</h3>
                        </div>
                    </div>
                </ng-template>
            </div>
            <div
                *ngIf="currentUser === undefined || currentUser === null; else notSignedIn"
                ngbDropdown
                class="d-inline-block"
            >
                <a class="nav-link" id="sign-in-dropdown-toggle" ngbDropdownToggle
                    >SIGN IN <fa-icon [icon]="faArrowDown" class="d-inline-block"></fa-icon
                ></a>
                <div
                    id="sign-in-dropdown"
                    ngbDropdownMenu
                    class="dropdown-menu dropdown-menu-right"
                    aria-labelledby="sign-in-dropdown"
                >
                    <form id="sign-in-form" class="px-3 py-2 w-100" #form="ngForm" (ngSubmit)="onSubmit()">
                        <div class="form-group">
                            <label for="email-signin">Email</label>
                            <input
                                type="email"
                                class="form-control"
                                id="email-signin"
                                name="email"
                                placeholder="email@example.com"
                                [(ngModel)]="model.username"
                                #email="ngModel"
                                autocomplete="email"
                            />
                        </div>
                        <div class="form-group">
                            <label for="password-signin">Password</label>
                            <input
                                type="password"
                                class="form-control"
                                id="password-signin"
                                name="password"
                                placeholder="Password"
                                autocomplete="password"
                                [(ngModel)]="model.password"
                                #password="ngModel"
                            />
                        </div>
                        <div class="form-group">
                            <div class="form-check">
                                <input
                                    type="checkbox"
                                    class="form-check-input"
                                    id="remember_me"
                                    name="remember-me"
                                    [(ngModel)]="model.remembered"
                                />
                                <label class="form-check-label" for="remember_me">Remember me</label>
                            </div>
                        </div>
                        <div [hidden]="!isInvalid" class="w-100 text-center sign-in-invalid">
                            Invalid email/password combination.
                        </div>
                        <button type="submit" class="standard-btn standard-btn-primary w-100">sign in</button>
                    </form>
                </div>
            </div>
            <a *ngIf="currentUser === undefined || currentUser === null" class="nav-link" routerLink="/auth/signup"
                >SIGN UP</a
            >
            <ng-template #notSignedIn>
                <div ngbDropdown class="d-inline-block">
                    <a class="nav-link" id="self-dropdown" ngbDropdownToggle
                        >{{ currentUser.name.toUpperCase() }}
                        <fa-icon [icon]="faArrowDown" class="d-inline-block"></fa-icon
                    ></a>
                    <div ngbDropdownMenu class="dropdown-menu dropdown-menu-right" aria-labelledby="self-dropdown">
                        <a
                            *ngIf="currentUser.role === 'USER'; else dashboardElse"
                            ngbDropdownItem
                            class="dropdown-item"
                            routerLink="/dashboard"
                            >DASHBOARD</a
                        >
                        <ng-template #dashboardElse>
                            <a ngbDropdownItem class="dropdown-item" routerLink="/admin/dashboard">DASHBOARD</a>
                        </ng-template>
                        <div class="dropdown-divider d-none d-lg-block"></div>
                        <a ngbDropdownItem class="dropdown-item" (click)="logout()" routerLink="/esports">SIGN OUT</a>
                    </div>
                </div>
            </ng-template>
        </div>
    </div>
</nav>
